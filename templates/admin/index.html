{% extends 'admin/base.html' %}

{% load i18n %}

{% block breadcrumbs %}{% endblock %}

{% block title %}
  {% if subtitle %}
    {{ subtitle }} |
  {% endif %}

  Аналитика заказов | {{ site_title|default:_('Django site admin') }}
{% endblock %}

{% block branding %}
  {% include "unfold/helpers/site_branding.html" %}
{% endblock %}

{% block content %}
  <div class="p-6 space-y-6">
    <h1 class="text-3xl font-bold text-gray-800">Аналитика заказов</h1>


    <!-- Фильтр по дате -->
    <div class="flex flex-col md:flex-row gap-4 mt-6 items-center">
      <form method="get">
        <div class="flex items-center gap-2 mb-3">
          <label class="text-gray-700 font-medium" for="start_date">От:</label>
          <input type="date" value="{% if start_date %}{{ start_date }}{% endif %}" id="start_date" name="start_date"
                 class="border border-gray-300 rounded px-3 py-1">
        </div>

        <div class="flex items-center gap-2 mb-3">
          <label class="text-gray-700 font-medium" for="end_date">До:</label>
          <input type="date" value="{% if end_date %}{{ end_date }}{% endif %}" id="end_date" name="end_date" class="border border-gray-300 rounded px-3 py-1">
        </div>


        <button class="bg-teal-500 text-white px-4 py-1 rounded hover:bg-teal-600 transition">Применить</button>
      </form>
    </div>

    <!-- Таблица аналитики -->
    <div class="overflow-x-auto mt-6">
      <table class="min-w-full bg-white rounded shadow divide-y divide-gray-200">
        <thead class="bg-gray-50">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Товар</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Количество
            продано
          </th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Сумма, грн</th>
        </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
        {% for variation in variations %}
          <tr class="hover:bg-gray-50 transition">
            <td class="px-6 py-4 whitespace-nowrap">{{ variation }}</td>
            <td class="px-6 py-4 whitespace-nowrap">{{ variation.total_quantity|default:0 }}</td>
            <td class="px-6 py-4 whitespace-nowrap">{{ variation.total_sum|default:0 }}</td>
          </tr>
        {% endfor %}


        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
